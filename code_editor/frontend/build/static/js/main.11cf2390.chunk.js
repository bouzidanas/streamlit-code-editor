(this["webpackJsonpstreamlit-code-editor"]=this["webpackJsonpstreamlit-code-editor"]||[]).push([[0],{501:function(e,t,n){"use strict";n.r(t);var o,r=n(0),i=n.n(r),a=n(32),s=n.n(a),c=n(3),m=n(2),u=n(12),l=n(6),d=n(4),p=n(33),f=n(7),g=n(13),y=n(503),b=n(8),h=n.n(b),v=n(34),S=n.n(v),O=(n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(497),n(5)),j=function(e){var t=e.lang,n=e.theme,o=e.shortcuts,i=e.props,a=e.snippetString,s=e.commands,u=e.keybindingString,l=e.editorRef,p=e.code,f=e.onChange;return Object(r.useEffect)((function(){if(l.current){h.a.require("ace/autocomplete").Autocomplete.for(l.current.editor);var e=JSON.parse(u);e.commands&&e.commands.length>0&&e.commands.forEach((function(e){var t;if(e.name&&"string"===typeof e.name&&JSON.stringify(null!==(t=l.current.editor.commands.commands[e.name].bindKey)&&void 0!==t?t:"")!==JSON.stringify(e.bindkey)){var n=Object(c.a)({},l.current.editor.commands.commands[e.name]);n.bindKey=e.bindkey,l.current.editor.commands.addCommand(n),s=[].concat(Object(m.a)(s),[n])}})),e.completer&&e.completer.length>0&&e.completer.forEach((function(e){var t;if(e.name&&"string"===typeof e.name&&JSON.stringify(null!==(t=l.current.editor.completer.keyboardHandler.commands[e.name].bindKey)&&void 0!==t?t:"")!==JSON.stringify(e.bindkey)){var n=Object(c.a)({},l.current.editor.completer.keyboardHandler.commands[e.name]);n.bindKey=e.bindkey,l.current.editor.completer.keyboardHandler.addCommand(n)}})),h.a.require("ace/ext/keybinding_menu").init(l.current.editor);for(var t=h.a.require("ace/snippets").snippetManager,n=JSON.parse(a),o=0,r=Object.entries(n);o<r.length;o++){var i=Object(d.a)(r[o],2),p=i[0],f=i[1];f[0]&&t.register(t.parseSnippetFile(f[0],p),p),f[1]&&t.unregister(t.parseSnippetFile(f[1],p),p)}}}),[a,u]),Object(O.jsx)(S.a,Object(c.a)({ref:l,name:"REACT_ACE_EDITOR",mode:t,theme:n,value:p,keyboardHandler:o,commands:s,onChange:f},i))},x=n(38),C=f.c.div.withConfig({displayName:"button-menu__StyledDiv",componentId:"sc-rz5v7a-0"})([""]),k=Object(f.c)(C).withConfig({displayName:"button-menu___StyledStyledDiv2",componentId:"sc-rz5v7a-1"})(["",""],(function(e){return e.$_css2})),w=Object(f.c)(C).withConfig({displayName:"button-menu___StyledStyledDiv",componentId:"sc-rz5v7a-2"})(["",""],(function(e){return e.$_css})),_=f.c.span.withConfig({displayName:"button-menu__StyledRegSpan",componentId:"sc-rz5v7a-3"})([""]),E=f.c.span.withConfig({displayName:"button-menu__StyledSpan",componentId:"sc-rz5v7a-4"})(["height:2.5rem;line-height:2.5rem;margin:0px 0.4rem 0.15rem 0.4rem;opacity:0;transform:scale(0);transition:opacity 300ms 150ms,transform 300ms 150ms;"]),A=f.c.button.withConfig({displayName:"button-menu__StyledButton",componentId:"sc-rz5v7a-5"})(["border:none;border-radius:5px;background:none;height:2.5rem;line-height:0;display:flex;align-items:center;justify-content:center;opacity:0;position:absolute;transform:scale(0);transition:opacity 20ms 300ms,transform 20ms 300ms;z-index:9994;:focus{outline:none;}span{color:",";transform:scale(0);transform-origin:right;transition:opacity 300ms 150ms,transform 300ms 150ms;}:hover span{color:",";opacity:1;transform:scale(1);}svg{stroke:",";transform:scale(0);transition:opacity 300ms 150ms,transform 300ms 150ms;}:hover svg{stroke:",";}"],(function(e){return"streamlit_dark"===e.themeProp?"rgba(250,250,250,0.6)":"rgba(0,0,0,0.5)"}),(function(e){return e.primary?e.theme.primaryColor:"streamlit_dark"===e.themeProp?"rgb(250,250,250)":"rgb(49, 51, 63)"}),(function(e){return"streamlit_dark"===e.themeProp?"rgba(250,250,250,0.6)":"rgba(0,0,0,0.5)"}),(function(e){return e.primary?e.theme.primaryColor:"streamlit_dark"===e.themeProp?"rgb(250,250,250)":"rgb(49, 51, 63)"})),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=x[e];return Object(O.jsx)(n,{size:"".concat(t)})},I=function(e){var t=e.info,n=e.theme,o=e.infoRef;return Object(O.jsx)(f.a,{theme:n,children:0===Object.keys(t).length?"":Object(O.jsxs)(w,{className:"custom_info_bar "+(t.name?t.name:""),style:t.style,$_css:t.css,children:[Object(O.jsx)(_,{ref:o,className:"code_editor-info message"},"code_editor_info_message"),(t.info||[]).map((function(e){return Object(O.jsx)(_,{className:e.class,style:e.style,children:e.name},"info_"+e.name)}))]},"info_bar")})},T=function(e){var t=e.button,n=e.theme,o=e.themeProp,i=e.executeAll,a=Object(r.useState)(!1),s=Object(d.a)(a,2),c=s[0],m=s[1],u=Object(r.useRef)(null);return Object(O.jsxs)(A,{ref:u,primary:!!t.primary&&t.primary,className:(t.class?t.class:"")+(t.alwaysOn?" always-on":"")+(t.showWithIcon?" with-icon":""),themeProp:o,style:t.style,theme:n,onClick:function(){var e,n,o;return n=null!==(e=t.commands)&&void 0!==e?e:[],o=t.toggledCommands,void(t.classToggle?(m(!c),u.current?(u.current.classList.toggle(t.classToggle),u.current.classList.contains(t.classToggle)?i(u,n):i(u,null!==o&&void 0!==o?o:n)):i(u,c&&null!==o&&void 0!==o?o:n)):i(u,n))},children:[t.hasText&&t.name?Object(O.jsx)(E,{children:t.name}):"",t.feather?N(t.feather||"X",t.iconSize):""]})},P=function(e){var t=e.buttonGroup,n=e.executeAll,o=e.theme,r=e.themeProp,i=function(e,t){t&&n(t)};return Object(O.jsx)(f.a,{theme:o,children:t.buttons.map((function(e){return Object(O.jsx)(T,{button:e,themeProp:r,theme:o,executeAll:function(e,t){return i(0,t)}},t.name+"_"+e.name)}))})},J=function(e){var t=e.menu,n=e.executeAll,o=e.theme,r=e.themeProp,i=function(e,t){t&&n(t)};return Object(O.jsx)(f.a,{theme:o,children:0===Object.keys(t).length?"":Object(O.jsx)(k,{className:"custom_menu",style:t.style,$_css2:t.css,children:t.groups?t.groups.map((function(e,t){return Object(O.jsx)(C,{className:"menu_group "+e.name,style:e.style,"data-one-toggle-only":e.toggleOnlyOne,children:e.buttons.map((function(t){return Object(O.jsx)(T,{button:t,themeProp:r,theme:o,executeAll:function(e,t){return i(0,t)}},e.name+"_"+t.name)}))},"group_"+e.name+t)})):""},"menu_bar")})},K=["info","menu","focus","code"],L={fontFamily:'"Source Code Pro", monospace',cursorStyle:"smooth",displayIndentGuides:!1,wrap:!1,highlightActiveLine:!0,showPrintMargin:!1,showLineNumbers:!1,foldStyle:"markbegin",autoScrollEditorIntoView:!1,animatedScroll:!0,fadeFoldWidgets:!0},R={editorProps:{$blockScrolling:!0}},M={cursorStart:1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,enableSnippets:!0,focus:!1,fontSize:14,highlightActiveLine:!0,navigateToFileEnd:!0,placeholder:null,readOnly:!1,scrollMargin:[15,15,0,0],setOptions:L,showGutter:!0,showPrintMargin:!1,style:{},tabSize:4,width:"auto",debounceChangePeriod:250},$=Object(f.b)(o||(o=Object(p.a)(["\n  html {\n    opacity: ",";\n    cursor: ",";\n    pointer-events: ",";\n  }\n  ","\n"])),(function(e){return e.isDisabled?"0.5":"1"}),(function(e){return e.isDisabled?"not-allowed":"auto"}),(function(e){return e.isDisabled?"none":"auto"}),(function(e){return e.inject})),D=f.c.div.withConfig({displayName:"CodeEditor__StyledCodeEditor",componentId:"sc-wmif04-0"})(["width:100%;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;:hover button{opacity:1;transform:scale(1);}button.always-on{opacity:1;transform:scale(1);transition:none;}:hover button svg{opacity:1;transform:scale(1);}:hover button.with-icon span{opacity:1;transform:scale(1);}button.always-on > span{opacity:1;transform:scale(1);transition:none;}button.always-on > svg{opacity:1;transform:scale(1);transition:none;}"]),z=Object(f.c)(D).withConfig({displayName:"CodeEditor___StyledStyledCodeEditor",componentId:"sc-wmif04-1"})(["",""],(function(e){return e.$_css})),H=Object(g.b)((function(e){var t,n,o=e.args,i=(e.width,e.disabled),a=e.theme,s=Object(r.useState)(o.code),p=Object(d.a)(s,2),f=p[0],b=p[1],v=Object(r.useRef)(null),S=Object(r.useRef)(null),x=Object(r.useRef)(null),C=Object(r.useRef)(!1),k=Object(r.useRef)(!1),w=function(e){return"string"===typeof e?e:(Array.isArray(e)?e:[e]).map((function(e){return["snippet "+e.name,e.code.split("\n").map((function(e){return"\t"+e})).join("\n")].join("\n")})).join("\n")},_=Object(r.useState)(Object(l.a)({},o.lang,[w(o.snippets[0]),w(o.snippets[1])])),E=Object(d.a)(_,2),A=E[0],N=E[1],T=Object(r.useState)(o.keybindings),D=Object(d.a)(T,2),H=D[0],V=D[1];Object(r.useEffect)((function(){return function(){n&&clearTimeout(n)}}),[]),Object(r.useEffect)((function(){v.current&&C.current&&(v.current.editor.focus(),C.current=!1)}),[C.current]),Object(r.useEffect)((function(){v.current&&o.focus&&v.current.editor.focus()}),[o.focus]);var q={commands:[{name:"submit",description:"Send 'submit' response",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(e){var t=e.getSession().$modeId.split("/").pop();g.a.setComponentValue({id:Object(y.a)().slice(0,8),type:"submit",text:e.getValue(),lang:t,cursor:e.getCursorPosition()})}},{name:"saveState",description:"Save state",bindKey:{win:"Ctrl-Alt-S",mac:"Command-Alt-S"},exec:function(e){b(e.getValue())}},{name:"copyAll",description:"Copy all text to clipboard",exec:function(e){G(e.getValue())}},{name:"reset",exec:function(){Q()}},{name:"keepFocus",description:"Return cursor to editor",exec:function(){C.current=!0}},{name:"setMode",description:"Set language mode",exec:function(e,t){t&&"string"===typeof t&&e.getSession().setMode("ace/mode/"+t)},readOnly:!0},{name:"changeShortcuts",description:"Switch shortcuts",exec:function(e,t){if(t&&"string"===typeof t)e.setKeyboardHandler("ace/keyboard/"+t);else{var n=["ace/keyboard/vim","ace/keyboard/emacs","ace/keyboard/sublime","ace/keyboard/vscode"],o=n[(n.indexOf(e.$keybindingId)+1)%4];e.setKeyboardHandler(o)}},readOnly:!0},{name:"toggleKeyboardShortcuts",exec:function(e){document.getElementById("kbshortcutmenu")?e.execCommand("simulateKeyPress",{type:"keydown",keyCode:27}):e.execCommand("showKeyboardShortcuts")}},{name:"simulateKeyPress",exec:function(e,t){t.key?document.dispatchEvent(new KeyboardEvent(t.type,{key:t.key})):t.keyCode&&document.dispatchEvent(new KeyboardEvent(t.type,{keyCode:t.keyCode}))}},{name:"infoMessage",description:"Display message in info bar",exec:function(e,t){if(t.targetQueryString){var o=document.querySelector(t.targetQueryString);o&&(o.innerText=t.text,o.classList.add(t.classToggle||""),t.timeout&&(n=setTimeout((function(){o.classList.remove(t.classToggle||"")}),t.timeout)))}else S.current&&(S.current.innerText=t.text,S.current.classList.add(t.classToggle||""),t.timeout&&(n=setTimeout((function(){var e;null===(e=S.current)||void 0===e||e.classList.remove(t.classToggle||"")}),t.timeout)))}},{name:"response",description:"Send custom response",exec:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.getSession().$modeId.split("/").pop();g.a.setComponentValue({id:Object(y.a)().slice(0,8),type:t,text:e.getValue(),lang:n,cursor:e.getCursorPosition()})}},{name:"returnSelection",description:"Send selected text to Streamlit",exec:function(e){var t=e.getSession().$modeId.split("/").pop();g.a.setComponentValue({id:Object(y.a)().slice(0,8),type:"selection",text:e.getSelectedText(),lang:t,cursor:e.getCursorPosition()})}},{name:"editSnippets",description:"Edit snippets",bindKey:{win:"Ctrl-Alt-M",mac:"Command-Alt-M"},exec:function(e){var t=h.a.require("ace/snippets").snippetManager;if(x.current){var n=e.getSession().$modeId.split("/").pop();if("snippets"===n){var r=e.getSession().getValue();e.setSession(x.current),x.current=null,b(e.getSession().getValue());try{var i=r.split("###~~~")[1].split("###---"),a=Object(d.a)(i,2),s=a[0],c=a[1],m=s.split("###+++")[1],u=c,p=e.getSession().$modeId.split("/").pop();N(Object(l.a)({},p,[A[p][0]+m,A[p][1]+u]))}catch(j){e.execCommand("infoMessage",{text:"error parsing file, restoring original file",timeout:2e3,classToggle:"show"})}}}else{var f=e.getSession().$modeId.split("/").pop(),g="\n###~~~#(DO NOT EDIT THIS LINE)\n# Commented out above are all the snippets that are currently\n# registered for ".concat(o.lang," mode.\n\n\n###+++#(DO NOT EDIT THIS LINE) \n# Put the snippets you want to add below this line.\n\n\n\n\n\n\n\n###---#(DO NOT EDIT THIS LINE) \n# Put the snippets you want to remove below this line.\n\n\n\n\n\n\n"),y="#"+w(t.snippetMap[f].map((function(e){return{name:e.name,code:e.content}}))).replace(/\n/g,"\n#")+g,v=(y.match(/\n/g)||[]).length;x.current=e.getSession();var S=h.a.createEditSession(y,"ace/mode/snippets");e.setSession(S);var O={row:v-15>0?v-15:0,column:0};e.moveCursorTo(O.row,O.column),e.renderer.scrollCursorIntoView(O,.5)}}},{name:"editKeyBindings",description:"Edit keybindings",bindKey:{win:"Ctrl-Alt-B",mac:"Command-Alt-B"},exec:function(e){if(h.a.require("ace/autocomplete").Autocomplete.for(e),x.current){if("json"===e.getSession().$modeId.split("/").pop()){var t=e.getSession().getValue();e.setSession(x.current),x.current=null,b(e.getSession().getValue());try{V(JSON.parse(t))}catch(i){e.execCommand("infoMessage",{text:"error parsing file, restoring original file",timeout:2e3,classToggle:"show"})}}}else{var n={commands:{},completer:{}};e.completer&&e.completer.keyboardHandler.commands&&(n.completer=Object.keys(e.completer.keyboardHandler.commands).map((function(t){var n;return{bindkey:null!==(n=e.completer.keyboardHandler.commands[t].bindKey)&&void 0!==n?n:"",name:e.completer.keyboardHandler.commands[t].name}}))),e.commands.commands&&(n.commands=Object.keys(e.commands.commands).map((function(t){var n;return{bindkey:null!==(n=e.commands.commands[t].bindKey)&&void 0!==n?n:"",name:e.commands.commands[t].name}})));var o=JSON.stringify(n,void 0,2);x.current=e.getSession();var r=h.a.createEditSession(o,"ace/mode/json");e.setSession(r)}}},{name:"exitSession",bindKey:{win:"Esc",mac:"Esc"},description:"Return to main session (keep changes)",exec:function(e){if(x.current){var t=e.getSession().$modeId.split("/").pop();"snippets"===t?e.execCommand("editSnippets"):"json"===t&&e.execCommand("editKeyBindings")}}},{name:"abandonSession",bindKey:{win:"Ctrl-Alt-Esc",mac:"Command-Alt-Esc"},description:"Return to main session (discard changes)",exec:function(e){x.current&&(e.setSession(x.current),x.current=null,b(e.getSession().getValue()))}},{name:"classART",description:"Add/Remove/Toggle class for element",exec:function(e,t){var n,o,r;if(t.targetQueryString&&t.type&&t.class)switch(t.type){case"add":null===(n=document.querySelectorAll(t.targetQueryString))||void 0===n||n.forEach((function(e){return e.classList.add(t.class)}));break;case"remove":null===(o=document.querySelectorAll(t.targetQueryString))||void 0===o||o.forEach((function(e){return e.classList.remove(t.class)}));break;case"toggle":null===(r=document.querySelectorAll(t.targetQueryString))||void 0===r||r.forEach((function(e){return e.classList.toggle(t.class)}))}}},{name:"conditionalExecute",description:"Execute command if element exists",exec:function(e,t){var n;t.targetQueryString&&t.command&&Array.isArray(t.command)&&(!(null===(n=t.condition)||void 0===n||n)===!document.querySelector(t.targetQueryString)&&("string"===typeof t.command[0]?B(t.command[0],t.command[1]):console.warn("Editor command - conditionalExecute: improper command format! Command array must contain name of command as first element and arguments as second element.")))}},{name:"delayedExecute",description:"Execute command after a period of time",exec:function(e,t){var n;if(t.command)if(Array.isArray(t.command)&&2===t.command.length)"string"===typeof t.command[0]?setTimeout((function(){B(t.command[0],t.command[1])}),null!==(n=t.timeout)&&void 0!==n?n:M.debounceChangePeriod):console.warn("Editor command - conditionalExecute: improper command format! Command array must contain name of command as first element and arguments as second element.");else if("string"===typeof t.command){var o;setTimeout((function(){B(t.command)}),null!==(o=t.timeout)&&void 0!==o?o:M.debounceChangePeriod)}}}]},B=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=null===(t=v.current)||void 0===t?void 0:t.editor;if(o)if(n)if("number"===typeof n||"string"===typeof n)o.execCommand(e,n);else if("object"!==typeof n||Array.isArray(n))console.warn('Function - execute: failed to parse/execute "'.concat(e,'" command!'));else{var r=!0;Object.keys(n).forEach((function(e){r="string"===typeof n[e]||"number"===typeof n[e]||Array.isArray(n[e])})),Object.keys(n).length<4&&r&&o.execCommand(e,n)}else o.execCommand(e)},F=function(e){e.forEach((function(e){Array.isArray(e)?"string"===typeof e[0]?B(e[0],e[1]):console.warn("Function - executeAll: improper command format! Singular commands must contain name of command as first element and arguments as second element."):"string"===typeof e?B(e):console.warn("Function - executeAll: failed to parse/execute command(s)!")}))},Q=function(){b(o.code)},G=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()},W=new ResizeObserver((function(e){var t;g.a.setFrameHeight(null!==(t=e[0].contentBoxSize.blockSize)&&void 0!==t?t:e[0].contentRect.height)}));Object(r.useEffect)((function(){!0===o.allow_reset&&o.code!==f&&(k.current=!k.current,Q())}),[o.code]);var X=function(){var e=!a||"dark"===a.base;switch(o.theme){case"contrast":return e?"streamlit_light":"streamlit_dark";case"light":return"streamlit_light";case"dark":return"streamlit_dark";default:return e?"streamlit_dark":"streamlit_light"}}(),U=o.component_props,Y=o.info,Z=o.menu,ee=(o.focus,o.code,Object(u.a)(o,K)),te=JSON.stringify(ee),ne=JSON.stringify(Z),oe=JSON.stringify(Y),re=JSON.stringify(o.buttons),ie=JSON.stringify(a),ae=JSON.stringify(A),se=Object(r.useMemo)((function(){var e=JSON.stringify(H),t=JSON.parse(te);t.buttons.length>0&&t.buttons.forEach((function(e){q.commands=[].concat(Object(m.a)(q.commands),[{name:e.name.trim().replace(/\s+/g,"_")+"_button",bindKey:e.bindKey,description:"Execute '"+e.name+"' button command(s)",exec:function(){F(e.commands)}}])}));var n={};"number"===typeof t.height?n={minLines:1,maxLines:t.height}:"string"===typeof t.height?n={height:t.height}:Array.isArray(t.height)&&2===t.height.length&&(n={minLines:t.height[0],maxLines:t.height[1]});var o=Object(c.a)(Object(c.a)({},R),t.editorProps),r={setOptions:Object(c.a)(Object(c.a)({},L),t.options),editorProps:o},i=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},M),r),n),t.props);return Object(O.jsx)(j,{editorRef:v,code:f,lang:t.lang,theme:X,shortcuts:t.shortcuts,snippetString:ae,commands:q.commands,keybindingString:e,props:i,onChange:function(e){b(e)}})}),[te,X,ae,H,k.current]),ce=Object(r.useMemo)((function(){var e=JSON.parse(re),t=JSON.parse(ie),n=null!==t&&void 0!==t?t:{},o={buttons:null!==e&&void 0!==e?e:[],name:"customButtons"};return Object(O.jsx)(P,{buttonGroup:o,theme:n,themeProp:X,executeAll:function(e){return F(e)}})}),[re,ie,X]),me=Object(r.useMemo)((function(){var e=JSON.parse(ne),t=JSON.parse(ie),n=null!==t&&void 0!==t?t:{};return Object(O.jsx)(J,{menu:e,theme:n,themeProp:X,executeAll:function(e){return F(e)}})}),[ne,ie,X]),ue=Object(r.useMemo)((function(){var e=JSON.parse(oe),t=JSON.parse(ie),n=null!==t&&void 0!==t?t:{};return Object(O.jsx)(I,{infoRef:S,info:e,theme:n})}),[oe,ie]),le=Object(r.useMemo)((function(){return Object(O.jsx)($,{isDisabled:i,inject:U.globalCSS})}),[U.globalCSS,i]);return Object(O.jsxs)(z,{ref:function(e){e?W.observe(e):W.disconnect()},style:U.style,className:null!==(t="streamlit_code-editor "+(null===a||void 0===a?void 0:a.base))&&void 0!==t?t:"",$_css:U.css,children:[le,se,ce,me,ue]})}));s.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(H,{})}),document.getElementById("root"))}},[[501,1,2]]]);
//# sourceMappingURL=main.11cf2390.chunk.js.map