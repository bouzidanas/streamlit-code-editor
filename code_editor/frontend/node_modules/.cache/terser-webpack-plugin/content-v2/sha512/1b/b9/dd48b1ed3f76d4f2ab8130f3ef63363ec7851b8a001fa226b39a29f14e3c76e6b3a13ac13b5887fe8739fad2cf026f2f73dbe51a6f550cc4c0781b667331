{"code":"ace.define(\"ace/ext/searchbox-css\",[\"require\",\"exports\",\"module\"],(function(e,t,n){n.exports='\\n\\n/* ------------------------------------------------------------------------------------------\\n * Editor Search Form\\n * --------------------------------------------------------------------------------------- */\\n.ace_search {\\n    background-color: #ddd;\\n    color: #666;\\n    border: 1px solid #cbcbcb;\\n    border-top: 0 none;\\n    overflow: hidden;\\n    margin: 0;\\n    padding: 4px 6px 0 4px;\\n    position: absolute;\\n    top: 0;\\n    z-index: 99;\\n    white-space: normal;\\n}\\n.ace_search.left {\\n    border-left: 0 none;\\n    border-radius: 0px 0px 5px 0px;\\n    left: 0;\\n}\\n.ace_search.right {\\n    border-radius: 0px 0px 0px 5px;\\n    border-right: 0 none;\\n    right: 0;\\n}\\n\\n.ace_search_form, .ace_replace_form {\\n    margin: 0 20px 4px 0;\\n    overflow: hidden;\\n    line-height: 1.9;\\n}\\n.ace_replace_form {\\n    margin-right: 0;\\n}\\n.ace_search_form.ace_nomatch {\\n    outline: 1px solid red;\\n}\\n\\n.ace_search_field {\\n    border-radius: 3px 0 0 3px;\\n    background-color: white;\\n    color: black;\\n    border: 1px solid #cbcbcb;\\n    border-right: 0 none;\\n    outline: 0;\\n    padding: 0;\\n    font-size: inherit;\\n    margin: 0;\\n    line-height: inherit;\\n    padding: 0 6px;\\n    min-width: 17em;\\n    vertical-align: top;\\n    min-height: 1.8em;\\n    box-sizing: content-box;\\n}\\n.ace_searchbtn {\\n    border: 1px solid #cbcbcb;\\n    line-height: inherit;\\n    display: inline-block;\\n    padding: 0 6px;\\n    background: #fff;\\n    border-right: 0 none;\\n    border-left: 1px solid #dcdcdc;\\n    cursor: pointer;\\n    margin: 0;\\n    position: relative;\\n    color: #666;\\n}\\n.ace_searchbtn:last-child {\\n    border-radius: 0 3px 3px 0;\\n    border-right: 1px solid #cbcbcb;\\n}\\n.ace_searchbtn:disabled {\\n    background: none;\\n    cursor: default;\\n}\\n.ace_searchbtn:hover {\\n    background-color: #eef1f6;\\n}\\n.ace_searchbtn.prev, .ace_searchbtn.next {\\n     padding: 0px 0.7em\\n}\\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\\n     content: \"\";\\n     border: solid 2px #888;\\n     width: 0.5em;\\n     height: 0.5em;\\n     border-width:  2px 0 0 2px;\\n     display:inline-block;\\n     transform: rotate(-45deg);\\n}\\n.ace_searchbtn.next:after {\\n     border-width: 0 2px 2px 0 ;\\n}\\n.ace_searchbtn_close {\\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\\n    border-radius: 50%;\\n    border: 0 none;\\n    color: #656565;\\n    cursor: pointer;\\n    font: 16px/16px Arial;\\n    padding: 0;\\n    height: 14px;\\n    width: 14px;\\n    top: 9px;\\n    right: 7px;\\n    position: absolute;\\n}\\n.ace_searchbtn_close:hover {\\n    background-color: #656565;\\n    background-position: 50% 100%;\\n    color: white;\\n}\\n\\n.ace_button {\\n    margin-left: 2px;\\n    cursor: pointer;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -o-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    overflow: hidden;\\n    opacity: 0.7;\\n    border: 1px solid rgba(100,100,100,0.23);\\n    padding: 1px;\\n    box-sizing:    border-box!important;\\n    color: black;\\n}\\n\\n.ace_button:hover {\\n    background-color: #eee;\\n    opacity:1;\\n}\\n.ace_button:active {\\n    background-color: #ddd;\\n}\\n\\n.ace_button.checked {\\n    border-color: #3399ff;\\n    opacity:1;\\n}\\n\\n.ace_search_options{\\n    margin-bottom: 3px;\\n    text-align: right;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -o-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    clear: both;\\n}\\n\\n.ace_search_counter {\\n    float: left;\\n    font-family: arial;\\n    padding: 0 8px;\\n}'})),ace.define(\"ace/ext/searchbox\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/ext/searchbox-css\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\",\"ace/config\"],(function(e,t,n){\"use strict\";var i=e(\"../lib/dom\"),c=e(\"../lib/lang\"),o=e(\"../lib/event\"),s=e(\"./searchbox-css\"),a=e(\"../keyboard/hash_handler\").HashHandler,r=e(\"../lib/keys\"),h=e(\"../config\").nls;i.importCssString(s,\"ace_searchbox\",!1);var l=function(){function e(e,t,n){this.activeInput;var c=i.createElement(\"div\");i.buildDom([\"div\",{class:\"ace_search right\"},[\"span\",{action:\"hide\",class:\"ace_searchbtn_close\"}],[\"div\",{class:\"ace_search_form\"},[\"input\",{class:\"ace_search_field\",placeholder:h(\"search-box.find.placeholder\",\"Search for\"),spellcheck:\"false\"}],[\"span\",{action:\"findPrev\",class:\"ace_searchbtn prev\"},\"\\u200b\"],[\"span\",{action:\"findNext\",class:\"ace_searchbtn next\"},\"\\u200b\"],[\"span\",{action:\"findAll\",class:\"ace_searchbtn\",title:\"Alt-Enter\"},h(\"search-box.find-all.text\",\"All\")]],[\"div\",{class:\"ace_replace_form\"},[\"input\",{class:\"ace_search_field\",placeholder:h(\"search-box.replace.placeholder\",\"Replace with\"),spellcheck:\"false\"}],[\"span\",{action:\"replaceAndFindNext\",class:\"ace_searchbtn\"},h(\"search-box.replace-next.text\",\"Replace\")],[\"span\",{action:\"replaceAll\",class:\"ace_searchbtn\"},h(\"search-box.replace-all.text\",\"All\")]],[\"div\",{class:\"ace_search_options\"},[\"span\",{action:\"toggleReplace\",class:\"ace_button\",title:h(\"search-box.toggle-replace.title\",\"Toggle Replace mode\"),style:\"float:left;margin-top:-2px;padding:0 5px;\"},\"+\"],[\"span\",{class:\"ace_search_counter\"}],[\"span\",{action:\"toggleRegexpMode\",class:\"ace_button\",title:h(\"search-box.toggle-regexp.title\",\"RegExp Search\")},\".*\"],[\"span\",{action:\"toggleCaseSensitive\",class:\"ace_button\",title:h(\"search-box.toggle-case.title\",\"CaseSensitive Search\")},\"Aa\"],[\"span\",{action:\"toggleWholeWords\",class:\"ace_button\",title:h(\"search-box.toggle-whole-word.title\",\"Whole Word Search\")},\"\\\\b\"],[\"span\",{action:\"searchInSelection\",class:\"ace_button\",title:h(\"search-box.toggle-in-selection.title\",\"Search In Selection\")},\"S\"]]],c),this.element=c.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(e),i.importCssString(s,\"ace_searchbox\",e.container)}return e.prototype.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},e.prototype.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},e.prototype.$initElements=function(e){this.searchBox=e.querySelector(\".ace_search_form\"),this.replaceBox=e.querySelector(\".ace_replace_form\"),this.searchOption=e.querySelector(\"[action=searchInSelection]\"),this.replaceOption=e.querySelector(\"[action=toggleReplace]\"),this.regExpOption=e.querySelector(\"[action=toggleRegexpMode]\"),this.caseSensitiveOption=e.querySelector(\"[action=toggleCaseSensitive]\"),this.wholeWordOption=e.querySelector(\"[action=toggleWholeWords]\"),this.searchInput=this.searchBox.querySelector(\".ace_search_field\"),this.replaceInput=this.replaceBox.querySelector(\".ace_search_field\"),this.searchCounter=e.querySelector(\".ace_search_counter\")},e.prototype.$init=function(){var e=this.element;this.$initElements(e);var t=this;o.addListener(e,\"mousedown\",(function(e){setTimeout((function(){t.activeInput.focus()}),0),o.stopPropagation(e)})),o.addListener(e,\"click\",(function(e){var n=(e.target||e.srcElement).getAttribute(\"action\");n&&t[n]?t[n]():t.$searchBarKb.commands[n]&&t.$searchBarKb.commands[n].exec(t),o.stopPropagation(e)})),o.addCommandKeyListener(e,(function(e,n,i){var c=r.keyCodeToString(i),s=t.$searchBarKb.findKeyCommand(n,c);s&&s.exec&&(s.exec(t),o.stopEvent(e))})),this.$onChange=c.delayedCall((function(){t.find(!1,!1)})),o.addListener(this.searchInput,\"input\",(function(){t.$onChange.schedule(20)})),o.addListener(this.searchInput,\"focus\",(function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()})),o.addListener(this.replaceInput,\"focus\",(function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()}))},e.prototype.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,\"ace_active-line\"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},e.prototype.$syncOptions=function(e){i.setCssClass(this.replaceOption,\"checked\",this.searchRange),i.setCssClass(this.searchOption,\"checked\",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?\"-\":\"+\",i.setCssClass(this.regExpOption,\"checked\",this.regExpOption.checked),i.setCssClass(this.wholeWordOption,\"checked\",this.wholeWordOption.checked),i.setCssClass(this.caseSensitiveOption,\"checked\",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?\"none\":\"\",this.replaceBox.style.display=this.replaceOption.checked&&!t?\"\":\"none\",this.find(!1,!1,e)},e.prototype.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},e.prototype.find=function(e,t,n){var c=!this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;i.setCssClass(this.searchBox,\"ace_nomatch\",c),this.editor._emit(\"findSearchBox\",{match:!c}),this.highlight(),this.updateCounter()},e.prototype.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=t.unicode,i=0,o=0;if(t){var s=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),a=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(a-=e.session.doc.positionToIndex(this.searchRange.start));for(var r,l=t.lastIndex=0;(r=t.exec(s))&&(i++,(l=r.index)<=a&&o++,!(i>999))&&(r[0]||(t.lastIndex=l+=c.skipEmptyMatch(s,l,n),!(l>=s.length))););}this.searchCounter.textContent=h(\"search-box.search-counter\",\"$0 of $1\",[o,i>999?\"999+\":i])},e.prototype.findNext=function(){this.find(!0,!1)},e.prototype.findPrev=function(){this.find(!0,!0)},e.prototype.findAll=function(){var e=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;i.setCssClass(this.searchBox,\"ace_nomatch\",e),this.editor._emit(\"findSearchBox\",{match:!e}),this.highlight(),this.hide()},e.prototype.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},e.prototype.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},e.prototype.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},e.prototype.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off(\"changeSession\",this.setSession),this.element.style.display=\"none\",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},e.prototype.show=function(e,t){this.active=!0,this.editor.on(\"changeSession\",this.setSession),this.element.style.display=\"\",this.replaceOption.checked=t,e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},e.prototype.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput},e}(),p=new a;p.bindKeys({\"Ctrl-f|Command-f\":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?\"\":\"none\",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},\"Ctrl-H|Command-Option-F\":function(e){e.editor.getReadOnly()||(e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus())},\"Ctrl-G|Command-G\":function(e){e.findNext()},\"Ctrl-Shift-G|Command-Shift-G\":function(e){e.findPrev()},esc:function(e){setTimeout((function(){e.hide()}))},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},\"Shift-Return\":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},\"Alt-Return\":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),p.addCommands([{name:\"toggleRegexpMode\",bindKey:{win:\"Alt-R|Alt-/\",mac:\"Ctrl-Alt-R|Ctrl-Alt-/\"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:\"toggleCaseSensitive\",bindKey:{win:\"Alt-C|Alt-I\",mac:\"Ctrl-Alt-R|Ctrl-Alt-I\"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:\"toggleWholeWords\",bindKey:{win:\"Alt-B|Alt-W\",mac:\"Ctrl-Alt-B|Ctrl-Alt-W\"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:\"toggleReplace\",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:\"searchInSelection\",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]);var d=new a([{bindKey:\"Esc\",name:\"closeSearchBar\",exec:function(e){e.searchBox.hide()}}]);l.prototype.$searchBarKb=p,l.prototype.$closeSearchBarKb=d,t.SearchBox=l,t.Search=function(e,t){(e.searchBox||new l(e)).show(e.session.getTextRange(),t)}})),ace.require([\"ace/ext/searchbox\"],(function(e){\"object\"==typeof module&&\"object\"==typeof exports&&module&&(module.exports=e)}));","name":"d75c996bb2b8d5b2f8a520a2fa32d899.js","input":"ace.define(\"ace/ext/searchbox-css\", [\"require\", \"exports\", \"module\"], function (require, exports, module) {\n  module.exports = \"\\n\\n/* ------------------------------------------------------------------------------------------\\n * Editor Search Form\\n * --------------------------------------------------------------------------------------- */\\n.ace_search {\\n    background-color: #ddd;\\n    color: #666;\\n    border: 1px solid #cbcbcb;\\n    border-top: 0 none;\\n    overflow: hidden;\\n    margin: 0;\\n    padding: 4px 6px 0 4px;\\n    position: absolute;\\n    top: 0;\\n    z-index: 99;\\n    white-space: normal;\\n}\\n.ace_search.left {\\n    border-left: 0 none;\\n    border-radius: 0px 0px 5px 0px;\\n    left: 0;\\n}\\n.ace_search.right {\\n    border-radius: 0px 0px 0px 5px;\\n    border-right: 0 none;\\n    right: 0;\\n}\\n\\n.ace_search_form, .ace_replace_form {\\n    margin: 0 20px 4px 0;\\n    overflow: hidden;\\n    line-height: 1.9;\\n}\\n.ace_replace_form {\\n    margin-right: 0;\\n}\\n.ace_search_form.ace_nomatch {\\n    outline: 1px solid red;\\n}\\n\\n.ace_search_field {\\n    border-radius: 3px 0 0 3px;\\n    background-color: white;\\n    color: black;\\n    border: 1px solid #cbcbcb;\\n    border-right: 0 none;\\n    outline: 0;\\n    padding: 0;\\n    font-size: inherit;\\n    margin: 0;\\n    line-height: inherit;\\n    padding: 0 6px;\\n    min-width: 17em;\\n    vertical-align: top;\\n    min-height: 1.8em;\\n    box-sizing: content-box;\\n}\\n.ace_searchbtn {\\n    border: 1px solid #cbcbcb;\\n    line-height: inherit;\\n    display: inline-block;\\n    padding: 0 6px;\\n    background: #fff;\\n    border-right: 0 none;\\n    border-left: 1px solid #dcdcdc;\\n    cursor: pointer;\\n    margin: 0;\\n    position: relative;\\n    color: #666;\\n}\\n.ace_searchbtn:last-child {\\n    border-radius: 0 3px 3px 0;\\n    border-right: 1px solid #cbcbcb;\\n}\\n.ace_searchbtn:disabled {\\n    background: none;\\n    cursor: default;\\n}\\n.ace_searchbtn:hover {\\n    background-color: #eef1f6;\\n}\\n.ace_searchbtn.prev, .ace_searchbtn.next {\\n     padding: 0px 0.7em\\n}\\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\\n     content: \\\"\\\";\\n     border: solid 2px #888;\\n     width: 0.5em;\\n     height: 0.5em;\\n     border-width:  2px 0 0 2px;\\n     display:inline-block;\\n     transform: rotate(-45deg);\\n}\\n.ace_searchbtn.next:after {\\n     border-width: 0 2px 2px 0 ;\\n}\\n.ace_searchbtn_close {\\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\\n    border-radius: 50%;\\n    border: 0 none;\\n    color: #656565;\\n    cursor: pointer;\\n    font: 16px/16px Arial;\\n    padding: 0;\\n    height: 14px;\\n    width: 14px;\\n    top: 9px;\\n    right: 7px;\\n    position: absolute;\\n}\\n.ace_searchbtn_close:hover {\\n    background-color: #656565;\\n    background-position: 50% 100%;\\n    color: white;\\n}\\n\\n.ace_button {\\n    margin-left: 2px;\\n    cursor: pointer;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -o-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    overflow: hidden;\\n    opacity: 0.7;\\n    border: 1px solid rgba(100,100,100,0.23);\\n    padding: 1px;\\n    box-sizing:    border-box!important;\\n    color: black;\\n}\\n\\n.ace_button:hover {\\n    background-color: #eee;\\n    opacity:1;\\n}\\n.ace_button:active {\\n    background-color: #ddd;\\n}\\n\\n.ace_button.checked {\\n    border-color: #3399ff;\\n    opacity:1;\\n}\\n\\n.ace_search_options{\\n    margin-bottom: 3px;\\n    text-align: right;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -o-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n    clear: both;\\n}\\n\\n.ace_search_counter {\\n    float: left;\\n    font-family: arial;\\n    padding: 0 8px;\\n}\";\n});\nace.define(\"ace/ext/searchbox\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/lib/lang\", \"ace/lib/event\", \"ace/ext/searchbox-css\", \"ace/keyboard/hash_handler\", \"ace/lib/keys\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"../lib/dom\");\n  var lang = require(\"../lib/lang\");\n  var event = require(\"../lib/event\");\n  var searchboxCss = require(\"./searchbox-css\");\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n  var keyUtil = require(\"../lib/keys\");\n  var nls = require(\"../config\").nls;\n  var MAX_COUNT = 999;\n  dom.importCssString(searchboxCss, \"ace_searchbox\", false);\n  var SearchBox = /** @class */function () {\n    function SearchBox(editor, range, showReplaceForm) {\n      this.activeInput;\n      var div = dom.createElement(\"div\");\n      dom.buildDom([\"div\", {\n        class: \"ace_search right\"\n      }, [\"span\", {\n        action: \"hide\",\n        class: \"ace_searchbtn_close\"\n      }], [\"div\", {\n        class: \"ace_search_form\"\n      }, [\"input\", {\n        class: \"ace_search_field\",\n        placeholder: nls(\"search-box.find.placeholder\", \"Search for\"),\n        spellcheck: \"false\"\n      }], [\"span\", {\n        action: \"findPrev\",\n        class: \"ace_searchbtn prev\"\n      }, \"\\u200b\"], [\"span\", {\n        action: \"findNext\",\n        class: \"ace_searchbtn next\"\n      }, \"\\u200b\"], [\"span\", {\n        action: \"findAll\",\n        class: \"ace_searchbtn\",\n        title: \"Alt-Enter\"\n      }, nls(\"search-box.find-all.text\", \"All\")]], [\"div\", {\n        class: \"ace_replace_form\"\n      }, [\"input\", {\n        class: \"ace_search_field\",\n        placeholder: nls(\"search-box.replace.placeholder\", \"Replace with\"),\n        spellcheck: \"false\"\n      }], [\"span\", {\n        action: \"replaceAndFindNext\",\n        class: \"ace_searchbtn\"\n      }, nls(\"search-box.replace-next.text\", \"Replace\")], [\"span\", {\n        action: \"replaceAll\",\n        class: \"ace_searchbtn\"\n      }, nls(\"search-box.replace-all.text\", \"All\")]], [\"div\", {\n        class: \"ace_search_options\"\n      }, [\"span\", {\n        action: \"toggleReplace\",\n        class: \"ace_button\",\n        title: nls(\"search-box.toggle-replace.title\", \"Toggle Replace mode\"),\n        style: \"float:left;margin-top:-2px;padding:0 5px;\"\n      }, \"+\"], [\"span\", {\n        class: \"ace_search_counter\"\n      }], [\"span\", {\n        action: \"toggleRegexpMode\",\n        class: \"ace_button\",\n        title: nls(\"search-box.toggle-regexp.title\", \"RegExp Search\")\n      }, \".*\"], [\"span\", {\n        action: \"toggleCaseSensitive\",\n        class: \"ace_button\",\n        title: nls(\"search-box.toggle-case.title\", \"CaseSensitive Search\")\n      }, \"Aa\"], [\"span\", {\n        action: \"toggleWholeWords\",\n        class: \"ace_button\",\n        title: nls(\"search-box.toggle-whole-word.title\", \"Whole Word Search\")\n      }, \"\\\\b\"], [\"span\", {\n        action: \"searchInSelection\",\n        class: \"ace_button\",\n        title: nls(\"search-box.toggle-in-selection.title\", \"Search In Selection\")\n      }, \"S\"]]], div);\n      this.element = div.firstChild;\n      this.setSession = this.setSession.bind(this);\n      this.$init();\n      this.setEditor(editor);\n      dom.importCssString(searchboxCss, \"ace_searchbox\", editor.container);\n    }\n    SearchBox.prototype.setEditor = function (editor) {\n      editor.searchBox = this;\n      editor.renderer.scroller.appendChild(this.element);\n      this.editor = editor;\n    };\n    SearchBox.prototype.setSession = function (e) {\n      this.searchRange = null;\n      this.$syncOptions(true);\n    };\n    SearchBox.prototype.$initElements = function (sb) {\n      this.searchBox = sb.querySelector(\".ace_search_form\");\n      this.replaceBox = sb.querySelector(\".ace_replace_form\");\n      this.searchOption = sb.querySelector(\"[action=searchInSelection]\");\n      this.replaceOption = sb.querySelector(\"[action=toggleReplace]\");\n      this.regExpOption = sb.querySelector(\"[action=toggleRegexpMode]\");\n      this.caseSensitiveOption = sb.querySelector(\"[action=toggleCaseSensitive]\");\n      this.wholeWordOption = sb.querySelector(\"[action=toggleWholeWords]\");\n      this.searchInput = this.searchBox.querySelector(\".ace_search_field\");\n      this.replaceInput = this.replaceBox.querySelector(\".ace_search_field\");\n      this.searchCounter = sb.querySelector(\".ace_search_counter\");\n    };\n    SearchBox.prototype.$init = function () {\n      var sb = this.element;\n      this.$initElements(sb);\n      var _this = this;\n      event.addListener(sb, \"mousedown\", function (e) {\n        setTimeout(function () {\n          _this.activeInput.focus();\n        }, 0);\n        event.stopPropagation(e);\n      });\n      event.addListener(sb, \"click\", function (e) {\n        var t = e.target || e.srcElement;\n        var action = t.getAttribute(\"action\");\n        if (action && _this[action]) _this[action]();else if (_this.$searchBarKb.commands[action]) _this.$searchBarKb.commands[action].exec(_this);\n        event.stopPropagation(e);\n      });\n      event.addCommandKeyListener(sb, function (e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        var command = _this.$searchBarKb.findKeyCommand(hashId, keyString);\n        if (command && command.exec) {\n          command.exec(_this);\n          event.stopEvent(e);\n        }\n      });\n      this.$onChange = lang.delayedCall(function () {\n        _this.find(false, false);\n      });\n      event.addListener(this.searchInput, \"input\", function () {\n        _this.$onChange.schedule(20);\n      });\n      event.addListener(this.searchInput, \"focus\", function () {\n        _this.activeInput = _this.searchInput;\n        _this.searchInput.value && _this.highlight();\n      });\n      event.addListener(this.replaceInput, \"focus\", function () {\n        _this.activeInput = _this.replaceInput;\n        _this.searchInput.value && _this.highlight();\n      });\n    };\n    SearchBox.prototype.setSearchRange = function (range) {\n      this.searchRange = range;\n      if (range) {\n        this.searchRangeMarker = this.editor.session.addMarker(range, \"ace_active-line\");\n      } else if (this.searchRangeMarker) {\n        this.editor.session.removeMarker(this.searchRangeMarker);\n        this.searchRangeMarker = null;\n      }\n    };\n    SearchBox.prototype.$syncOptions = function (preventScroll) {\n      dom.setCssClass(this.replaceOption, \"checked\", this.searchRange);\n      dom.setCssClass(this.searchOption, \"checked\", this.searchOption.checked);\n      this.replaceOption.textContent = this.replaceOption.checked ? \"-\" : \"+\";\n      dom.setCssClass(this.regExpOption, \"checked\", this.regExpOption.checked);\n      dom.setCssClass(this.wholeWordOption, \"checked\", this.wholeWordOption.checked);\n      dom.setCssClass(this.caseSensitiveOption, \"checked\", this.caseSensitiveOption.checked);\n      var readOnly = this.editor.getReadOnly();\n      this.replaceOption.style.display = readOnly ? \"none\" : \"\";\n      this.replaceBox.style.display = this.replaceOption.checked && !readOnly ? \"\" : \"none\";\n      this.find(false, false, preventScroll);\n    };\n    SearchBox.prototype.highlight = function (re) {\n      this.editor.session.highlight(re || this.editor.$search.$options.re);\n      this.editor.renderer.updateBackMarkers();\n    };\n    SearchBox.prototype.find = function (skipCurrent, backwards, preventScroll) {\n      var range = this.editor.find(this.searchInput.value, {\n        skipCurrent: skipCurrent,\n        backwards: backwards,\n        wrap: true,\n        regExp: this.regExpOption.checked,\n        caseSensitive: this.caseSensitiveOption.checked,\n        wholeWord: this.wholeWordOption.checked,\n        preventScroll: preventScroll,\n        range: this.searchRange\n      });\n      var noMatch = !range && this.searchInput.value;\n      dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n      this.editor._emit(\"findSearchBox\", {\n        match: !noMatch\n      });\n      this.highlight();\n      this.updateCounter();\n    };\n    SearchBox.prototype.updateCounter = function () {\n      var editor = this.editor;\n      var regex = editor.$search.$options.re;\n      var supportsUnicodeFlag = regex.unicode;\n      var all = 0;\n      var before = 0;\n      if (regex) {\n        var value = this.searchRange ? editor.session.getTextRange(this.searchRange) : editor.getValue();\n        var offset = editor.session.doc.positionToIndex(editor.selection.anchor);\n        if (this.searchRange) offset -= editor.session.doc.positionToIndex(this.searchRange.start);\n        var last = regex.lastIndex = 0;\n        var m;\n        while (m = regex.exec(value)) {\n          all++;\n          last = m.index;\n          if (last <= offset) before++;\n          if (all > MAX_COUNT) break;\n          if (!m[0]) {\n            regex.lastIndex = last += lang.skipEmptyMatch(value, last, supportsUnicodeFlag);\n            if (last >= value.length) break;\n          }\n        }\n      }\n      this.searchCounter.textContent = nls(\"search-box.search-counter\", \"$0 of $1\", [before, all > MAX_COUNT ? MAX_COUNT + \"+\" : all]);\n    };\n    SearchBox.prototype.findNext = function () {\n      this.find(true, false);\n    };\n    SearchBox.prototype.findPrev = function () {\n      this.find(true, true);\n    };\n    SearchBox.prototype.findAll = function () {\n      var range = this.editor.findAll(this.searchInput.value, {\n        regExp: this.regExpOption.checked,\n        caseSensitive: this.caseSensitiveOption.checked,\n        wholeWord: this.wholeWordOption.checked\n      });\n      var noMatch = !range && this.searchInput.value;\n      dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n      this.editor._emit(\"findSearchBox\", {\n        match: !noMatch\n      });\n      this.highlight();\n      this.hide();\n    };\n    SearchBox.prototype.replace = function () {\n      if (!this.editor.getReadOnly()) this.editor.replace(this.replaceInput.value);\n    };\n    SearchBox.prototype.replaceAndFindNext = function () {\n      if (!this.editor.getReadOnly()) {\n        this.editor.replace(this.replaceInput.value);\n        this.findNext();\n      }\n    };\n    SearchBox.prototype.replaceAll = function () {\n      if (!this.editor.getReadOnly()) this.editor.replaceAll(this.replaceInput.value);\n    };\n    SearchBox.prototype.hide = function () {\n      this.active = false;\n      this.setSearchRange(null);\n      this.editor.off(\"changeSession\", this.setSession);\n      this.element.style.display = \"none\";\n      this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);\n      this.editor.focus();\n    };\n    SearchBox.prototype.show = function (value, isReplace) {\n      this.active = true;\n      this.editor.on(\"changeSession\", this.setSession);\n      this.element.style.display = \"\";\n      this.replaceOption.checked = isReplace;\n      if (value) this.searchInput.value = value;\n      this.searchInput.focus();\n      this.searchInput.select();\n      this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb);\n      this.$syncOptions(true);\n    };\n    SearchBox.prototype.isFocused = function () {\n      var el = document.activeElement;\n      return el == this.searchInput || el == this.replaceInput;\n    };\n    return SearchBox;\n  }();\n  var $searchBarKb = new HashHandler();\n  $searchBarKb.bindKeys({\n    \"Ctrl-f|Command-f\": function (sb) {\n      var isReplace = sb.isReplace = !sb.isReplace;\n      sb.replaceBox.style.display = isReplace ? \"\" : \"none\";\n      sb.replaceOption.checked = false;\n      sb.$syncOptions();\n      sb.searchInput.focus();\n    },\n    \"Ctrl-H|Command-Option-F\": function (sb) {\n      if (sb.editor.getReadOnly()) return;\n      sb.replaceOption.checked = true;\n      sb.$syncOptions();\n      sb.replaceInput.focus();\n    },\n    \"Ctrl-G|Command-G\": function (sb) {\n      sb.findNext();\n    },\n    \"Ctrl-Shift-G|Command-Shift-G\": function (sb) {\n      sb.findPrev();\n    },\n    \"esc\": function (sb) {\n      setTimeout(function () {\n        sb.hide();\n      });\n    },\n    \"Return\": function (sb) {\n      if (sb.activeInput == sb.replaceInput) sb.replace();\n      sb.findNext();\n    },\n    \"Shift-Return\": function (sb) {\n      if (sb.activeInput == sb.replaceInput) sb.replace();\n      sb.findPrev();\n    },\n    \"Alt-Return\": function (sb) {\n      if (sb.activeInput == sb.replaceInput) sb.replaceAll();\n      sb.findAll();\n    },\n    \"Tab\": function (sb) {\n      (sb.activeInput == sb.replaceInput ? sb.searchInput : sb.replaceInput).focus();\n    }\n  });\n  $searchBarKb.addCommands([{\n    name: \"toggleRegexpMode\",\n    bindKey: {\n      win: \"Alt-R|Alt-/\",\n      mac: \"Ctrl-Alt-R|Ctrl-Alt-/\"\n    },\n    exec: function (sb) {\n      sb.regExpOption.checked = !sb.regExpOption.checked;\n      sb.$syncOptions();\n    }\n  }, {\n    name: \"toggleCaseSensitive\",\n    bindKey: {\n      win: \"Alt-C|Alt-I\",\n      mac: \"Ctrl-Alt-R|Ctrl-Alt-I\"\n    },\n    exec: function (sb) {\n      sb.caseSensitiveOption.checked = !sb.caseSensitiveOption.checked;\n      sb.$syncOptions();\n    }\n  }, {\n    name: \"toggleWholeWords\",\n    bindKey: {\n      win: \"Alt-B|Alt-W\",\n      mac: \"Ctrl-Alt-B|Ctrl-Alt-W\"\n    },\n    exec: function (sb) {\n      sb.wholeWordOption.checked = !sb.wholeWordOption.checked;\n      sb.$syncOptions();\n    }\n  }, {\n    name: \"toggleReplace\",\n    exec: function (sb) {\n      sb.replaceOption.checked = !sb.replaceOption.checked;\n      sb.$syncOptions();\n    }\n  }, {\n    name: \"searchInSelection\",\n    exec: function (sb) {\n      sb.searchOption.checked = !sb.searchRange;\n      sb.setSearchRange(sb.searchOption.checked && sb.editor.getSelectionRange());\n      sb.$syncOptions();\n    }\n  }]);\n  var $closeSearchBarKb = new HashHandler([{\n    bindKey: \"Esc\",\n    name: \"closeSearchBar\",\n    exec: function (editor) {\n      editor.searchBox.hide();\n    }\n  }]);\n  SearchBox.prototype.$searchBarKb = $searchBarKb;\n  SearchBox.prototype.$closeSearchBarKb = $closeSearchBarKb;\n  exports.SearchBox = SearchBox;\n  exports.Search = function (editor, isReplace) {\n    var sb = editor.searchBox || new SearchBox(editor);\n    sb.show(editor.session.getTextRange(), isReplace);\n  };\n});\n(function () {\n  ace.require([\"ace/ext/searchbox\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();"}